(window.webpackJsonp=window.webpackJsonp||[]).push([[37,64],{"6F7e":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var c=function(t){return t.Password="password",t.Text="text",t.Email="email",t}({})},Cd4i:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var c=n("SVse"),i=n("8Y7J");let o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Tb({type:t}),t.\u0275inj=i.Sb({imports:[[c.c]]}),t})()},GJmQ:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var c=n("7o/Q");function i(t,e=!1){return n=>n.lift(new o(t,e))}class o{constructor(t,e){this.predicate=t,this.inclusive=e}call(t,e){return e.subscribe(new a(t,this.predicate,this.inclusive))}}class a extends c.a{constructor(t,e,n){super(t),this.predicate=e,this.inclusive=n,this.index=0}_next(t){const e=this.destination;let n;try{n=this.predicate(t,this.index++)}catch(c){return void e.error(c)}this.nextOrComplete(t,n)}nextOrComplete(t,e){const n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())}}},MK0t:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var c=n("8Y7J"),i=n("s7LF"),o=n("SVse"),a=n("lbNf"),s=n("D1Kz");function r(t,e){1&t&&c.Wb(0,"inline-icon",2)}const l=["*"];let d=0,u=(()=>{class t{constructor(t){this.cdr=t,this.gtmId=this.generateId(),this.checked=!1,this.checkedChange=new c.o}registerOnChange(t){this.changed=t}registerOnTouched(){}writeValue(t){this.checked=!!t,this.cdr.detectChanges()}setDisabledState(t){this.disabled=t}onChange(){this.checked=!this.checked,this.checkedChange.emit(this.checked),this.changed&&this.changed(this.checked)}generateId(){return"checkbox_"+d++}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(c.h))},t.\u0275cmp=c.Pb({type:t,selectors:[["nfj-checkbox"]],inputs:{gtmId:"gtmId",checked:"checked",disabled:"disabled"},outputs:{checkedChange:"checkedChange"},features:[c.Gb([{provide:i.p,useExisting:t,multi:!0}])],ngContentSelectors:l,decls:5,vars:9,consts:[["type","checkbox",3,"disabled","change"],["class","position-absolute text-main","style","--width: 18px; --height: 18px","matIcon","done",4,"ngIf"],["matIcon","done",1,"position-absolute","text-main",2,"--width","18px","--height","18px"]],template:function(t,e){1&t&&(c.xc(),c.bc(0,"label"),c.bc(1,"input",0),c.mc("change",function(){return e.onChange()}),c.ac(),c.Xc(2,r,1,0,"inline-icon",1),c.bc(3,"span"),c.wc(4),c.ac(),c.ac()),2&t&&(c.Nb("checked",e.checked)("disabled",e.disabled),c.Ib("for",e.gtmId),c.Hb(1),c.yc("disabled",e.disabled),c.Ib("id",e.gtmId)("checked",e.checked),c.Hb(1),c.yc("ngIf",e.checked))},directives:[o.p,a.a,s.a],styles:['label[_ngcontent-%COMP%]{cursor:pointer;line-height:20px;padding-left:30px;position:relative}label[_ngcontent-%COMP%]     *{font-size:13px}label[_ngcontent-%COMP%] > inline-icon[_ngcontent-%COMP%]{left:2px;top:2px;z-index:1}label[_ngcontent-%COMP%]:before{background-color:#fff;border:2px solid #e5e5e5;content:"";display:inline-block;height:20px;left:0;position:absolute;width:20px}label.checked[_ngcontent-%COMP%]:before{border-color:#191919}label.disabled[_ngcontent-%COMP%]{cursor:not-allowed}label.disabled[_ngcontent-%COMP%]:before{cursor:not-allowed;opacity:.5}label.disabled[_ngcontent-%COMP%]     *{opacity:.5}input[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),t})()},kqcB:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var c=n("TqOs"),i=n("8Y7J"),o=n("s7LF"),a=n("aYmo"),s=n("HPBK"),r=n("SVse"),l=n("srUL"),d=n("lbNf"),u=n("xh4B"),h=n("TSSN");function b(t,e){if(1&t&&(i.Zb(0),i.Zc(1),i.rc(2,"translate"),i.Yb()),2&t){const t=i.qc().$implicit;i.Hb(1),i.bd(" ",i.sc(2,1,t.text)," ")}}function g(t,e){if(1&t){const t=i.cc();i.bc(0,"button",1),i.mc("click",function(){i.Mc(t);const n=e.$implicit;return i.qc().popup(n.type)}),i.rc(1,"lowercase"),i.Wb(2,"inline-icon",2),i.Xc(3,b,3,3,"ng-container",3),i.ac()}if(2&t){const t=e.$implicit,n=i.qc();i.Kb("py-3 d-flex align-items-center justify-content-center ",t.type,""),i.Nb("highLight",t.type===i.sc(1,12,n.highLight)),i.yc("disabled",n.disabledLinks)("type",n.btnType)("angularticsLabel",t.type),i.Hb(2),i.Nb("mr-2",n.showText),i.yc("commonIcon",t.icon),i.Hb(1),i.yc("ngIf",n.showText)}}let p=(()=>{class t{constructor(t,e,n,c){this.parentForm=t,this.authenticationService=e,this.location=n,this.googleLoginService=c,this.mode="Sign In",this.btnType="button",this.showText=!0,this.handleAuthClick=new i.o,this.variantClass="",this.disabledLinks=!1,this.socialLogins=[{type:"facebook",icon:"facebook",text:"social-login.action with Facebook"},{type:"twitter",icon:"twitter",text:"social-login.action with Twitter"},{type:"linkedin",icon:"linkedin",text:"social-login.action with Linkedin"},{type:"google",icon:"google_red",text:"social-login.action with Google"}]}get intersectionId(){return this.variantClass}getUrl(t){const e=`/api/login/social/${t}?redirectUrl=${this.redirectUrl()}`,{protocol:n,port:c,hostname:i}=this.location;return`${n}//${i}${c?":"+c:""}${e}`}redirectUrl(){return encodeURIComponent(window.location.origin+(this.redirectTo?this.redirectTo:"/profile")+"#closeWindow")}popup(t){("submit"!==this.btnType||this.parentForm.form.valid)&&(this.handleAuthClick.emit(),"google"!==t?this.authenticationService.doAuthorization(this.getUrl(t)):this.googleLoginService.signIn(c.a))}}return t.\u0275fac=function(e){return new(e||t)(i.Vb(o.k,8),i.Vb(a.a),i.Vb(r.x),i.Vb(s.a))},t.\u0275cmp=i.Pb({type:t,selectors:[["nfj-social-login-box"]],hostVars:1,hostBindings:function(t,e){2&t&&i.Ib("class",e.intersectionId)},inputs:{redirectTo:"redirectTo",mode:"mode",btnType:"btnType",showText:"showText",highLight:"highLight",variantClass:"variantClass",disabledLinks:"disabledLinks"},outputs:{handleAuthClick:"handleAuthClick"},decls:1,vars:1,consts:[["angulartics2On","click","angularticsAction","signin","angularticsCategory","profile",3,"disabled","highLight","type","angularticsLabel","class","click",4,"ngFor","ngForOf"],["angulartics2On","click","angularticsAction","signin","angularticsCategory","profile",3,"disabled","type","angularticsLabel","click"],[2,"--width","16px","--height","16px",3,"commonIcon"],[4,"ngIf"]],template:function(t,e){1&t&&i.Xc(0,g,4,14,"button",0),2&t&&i.yc("ngForOf",e.socialLogins)},directives:[r.o,l.c,d.a,u.a,r.p],pipes:[r.m,h.d],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}[_nghost-%COMP%]   .highLight[_ngcontent-%COMP%]{-webkit-animation:pulse 1.5s infinite;animation:pulse 1.5s infinite;transform:rotate(10deg)}@-webkit-keyframes pulse{0%{transform:scaleX(1)}50%{transform:scale3d(1.2,1.2,1.2)}to{transform:scaleX(1)}}@keyframes pulse{0%{transform:scaleX(1)}50%{transform:scale3d(1.2,1.2,1.2)}to{transform:scaleX(1)}}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;margin-bottom:15px;width:49%}@media (max-width:991.98px){[_nghost-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}[_nghost-%COMP%]   button.facebook[_ngcontent-%COMP%]{border:1px solid #526faf;color:#526faf}[_nghost-%COMP%]   button.linkedin[_ngcontent-%COMP%]{border:1px solid #007bb6;color:#007bb6}[_nghost-%COMP%]   button.twitter[_ngcontent-%COMP%]{border:1px solid #4ab3f4;color:#4ab3f4}[_nghost-%COMP%]   button.google[_ngcontent-%COMP%]{border:1px solid #dd4b39;color:#dd4b39}.complex-variant[_nghost-%COMP%]{padding:0 40px}@media (max-width:991.98px){.complex-variant[_nghost-%COMP%]{padding:0}}.complex-variant[_nghost-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:0 -2px 18px 0 rgba(0,0,0,.07);width:20%}.full-variant[_nghost-%COMP%]   button.linkedin[_ngcontent-%COMP%]{background-color:#007bb6;color:#fff}.full-variant[_nghost-%COMP%]   button.twitter[_ngcontent-%COMP%]{background-color:#4ab3f4;color:#fff}.full-variant[_nghost-%COMP%]   button.google[_ngcontent-%COMP%]{background-color:#dd4b39;color:#fff}.full-variant[_nghost-%COMP%]   button.facebook[_ngcontent-%COMP%]{background-color:#5170b0;color:#fff}"],changeDetection:0}),t})()},pe4W:function(t,e,n){"use strict";n.r(e),n.d(e,"AuthHandlerComponent",function(){return Gt}),n.d(e,"PASSWORD_MIN_CHARACTERS",function(){return et.a}),n.d(e,"AuthLoginComponent",function(){return B}),n.d(e,"AuthSignupComponent",function(){return Q}),n.d(e,"AuthResetPasswordComponent",function(){return _t}),n.d(e,"NfjFeatureAuthModule",function(){return Kt.NfjFeatureAuthModule}),n.d(e,"NfjAuthLibLoaderModule",function(){return Bt.a});var c=n("lJxs"),i=n("CqXF"),o=n("pLZG"),a=n("eIep"),s=n("vkgz"),r=n("IzEk"),l=n("JX91"),d=n("XNiG"),u=n("LRne"),h=n("LqlI"),b=n("TBEm"),g=n("8Y7J"),p=n("iInd"),f=n("aYmo"),m=n("SVse"),y=n("mrSG"),w=n("3bzS"),v=n("6F7e"),C=n("s7LF"),x=n("Iwzq"),k=n("2Vo4"),O=n("lYYI");function P(t,e){1&t&&(g.bc(0,"div",2),g.Wb(1,"img",3),g.ac())}const I=[[["",8,"circle-icon"]],"*"],L=[".circle-icon","*"];let j=(()=>{class t{constructor(){this.showNfjLogo=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Pb({type:t,selectors:[["nfj-auth-shell"]],inputs:{title:"title",showNfjLogo:"showNfjLogo"},ngContentSelectors:L,decls:6,vars:2,consts:[["class","logo",4,"ngIf"],[1,"title"],[1,"logo"],["src","/assets/images/nfj-black-logo.png","alt",""]],template:function(t,e){1&t&&(g.xc(I),g.Xc(0,P,2,0,"div",0),g.bc(1,"div"),g.wc(2),g.ac(),g.bc(3,"h1",1),g.Zc(4),g.ac(),g.wc(5,1)),2&t&&(g.yc("ngIf",e.showNfjLogo),g.Hb(4),g.ad(e.title))},directives:[m.p],styles:[".modal-auth{background:#fff;margin-top:80px;padding-bottom:20px;padding-left:20px;padding-right:20px;pointer-events:auto;text-align:center}  .modal-auth .modal-content{border:none}.logo[_ngcontent-%COMP%]{margin:0 auto;position:relative;top:-40px;width:80px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;width:80px}.title[_ngcontent-%COMP%]{color:#111;font-size:28px;font-weight:700;margin-bottom:20px;margin-top:0;word-break:break-word}[_nghost-%COMP%]     .circle-icon{align-items:center;border:1px solid;border-radius:50%;display:flex;height:70px;justify-content:center;margin:0 auto 50px;position:relative;top:20px;width:70px}[_nghost-%COMP%]     .circle-icon i{font-size:30px}[_nghost-%COMP%]     .text{color:#888;font-size:14px;font-weight:400}[_nghost-%COMP%]     common-field-errors{display:block;text-align:left;width:100%}[_nghost-%COMP%]     common-field-errors   .alert{background:none;display:block;margin:0;padding:0;width:100%}[_nghost-%COMP%]     .star{color:#f45958}[_nghost-%COMP%]     .links a{font-size:14px;font-weight:500}[_nghost-%COMP%]     .alert-danger{color:#f45958}[_nghost-%COMP%]     .alert-success{color:#19a59a}[_nghost-%COMP%]     .btn.btn-primary{font-size:18px;height:50px}[_nghost-%COMP%]     common-text-field label, [_nghost-%COMP%]     label{color:#888;display:block;font-size:14px;margin-bottom:0!important;text-align:left}[_nghost-%COMP%]     common-text-field .form-group{margin-bottom:12px}[_nghost-%COMP%]     nfj-social-login-box{margin-bottom:40px}[_nghost-%COMP%]     section{margin:30px 0}[_nghost-%COMP%]     section:last-child{margin-bottom:0}"],changeDetection:0}),t})();var M=n("xvio"),_=n("qZRz"),H=n("kqcB"),A=n("TSSN"),S=n("lbNf"),q=n("D1Kz"),R=n("tHuc");function N(t,e){if(1&t&&(g.Zb(0),g.Wb(1,"nfj-social-login-box",11),g.bc(2,"div",12),g.bc(3,"span",13),g.Zc(4,"auth.common.or"),g.ac(),g.ac(),g.Yb()),2&t){const t=g.qc(2);g.Hb(1),g.yc("redirectTo",t.redirectTo)}}function T(t,e){1&t&&(g.bc(0,"div",17),g.bc(1,"div",18),g.bc(2,"span",19),g.Zc(3,"Please wait..."),g.ac(),g.ac(),g.ac())}function V(t,e){1&t&&(g.bc(0,"div",20),g.Wb(1,"inline-icon",21),g.Zc(2," auth.activate.ACCOUNT_ACTIVE "),g.ac())}function E(t,e){1&t&&(g.bc(0,"div",22),g.Wb(1,"inline-icon",23),g.bc(2,"div"),g.bc(3,"span",13),g.Zc(4,"auth.activate.token expired"),g.ac(),g.bc(5,"span",24),g.Zc(6,"auth.activate.PLEASE_RESET"),g.ac(),g.ac(),g.ac())}function Z(t,e){if(1&t&&(g.Zb(0),g.Xc(1,T,4,0,"div",14),g.Xc(2,V,3,0,"div",15),g.Xc(3,E,7,0,"div",16),g.Yb()),2&t){const t=e.ngIf;g.Hb(1),g.yc("ngIf",t.pending),g.Hb(1),g.yc("ngIf",t.success),g.Hb(1),g.yc("ngIf",t.error)}}function D(t,e){if(1&t&&(g.Zb(0),g.Xc(1,Z,4,3,"ng-container",1),g.rc(2,"async"),g.Yb()),2&t){const t=g.qc(2);g.Hb(1),g.yc("ngIf",g.sc(2,1,t.activationState$))}}function X(t,e){if(1&t&&(g.bc(0,"div",25),g.bc(1,"inline-icon",23),g.Zc(2,"vpn_key"),g.ac(),g.bc(3,"div"),g.bc(4,"span",24),g.Zc(5),g.ac(),g.ac(),g.ac()),2&t){const t=e.ngIf;g.Hb(5),g.bd(" ",t," ")}}const W=function(t){return{auth:t}};function z(t,e){if(1&t&&(g.bc(0,"div",26),g.bc(1,"a",27),g.Zc(2," auth.common.reset password "),g.ac(),g.bc(3,"a",28),g.Zc(4," auth.common.sign up "),g.ac(),g.ac()),2&t){const t=g.qc(2);g.Hb(1),g.yc("routerLink",null)("queryParams",g.Dc(4,W,t.AuthAction.Reset)),g.Hb(2),g.yc("routerLink",null)("queryParams",g.Dc(6,W,t.AuthAction.SignUp))}}function F(t,e){if(1&t){const t=g.cc();g.bc(0,"nfj-auth-shell",2),g.rc(1,"translate"),g.Xc(2,N,5,1,"ng-container",1),g.Xc(3,D,3,3,"ng-container",1),g.bc(4,"section"),g.bc(5,"form",3),g.mc("ngSubmit",function(){return g.Mc(t),g.qc().login()}),g.bc(6,"div",4),g.bc(7,"div",5),g.Wb(8,"common-text-field",6),g.ac(),g.bc(9,"div",5),g.Wb(10,"common-text-field",7),g.ac(),g.ac(),g.Xc(11,X,6,1,"div",8),g.rc(12,"async"),g.bc(13,"button",9),g.Zc(14),g.rc(15,"translate"),g.ac(),g.Xc(16,z,5,8,"div",10),g.ac(),g.ac(),g.ac()}if(2&t){const t=g.qc();g.yc("title",g.sc(1,13,"auth.common.login")),g.Hb(2),g.yc("ngIf",!t.activationAccountMode&&t.showSocials),g.Hb(1),g.yc("ngIf",t.activationAccountMode),g.Hb(2),g.yc("formGroup",t.form),g.Hb(2),g.Nb("col-sm-6",!t.activationAccountMode),g.Hb(1),g.yc("config",t.emailConfig),g.Hb(1),g.Nb("col-sm-6",!t.activationAccountMode),g.Hb(1),g.yc("config",t.passwordConfig),g.Hb(1),g.yc("ngIf",g.sc(12,15,t.loginError)),g.Hb(3),g.bd(" ",g.sc(15,17,"auth.common.login")," "),g.Hb(2),g.yc("ngIf",t.showLinks)}}const U=function(t){return{email:t}};function $(t,e){if(1&t&&(g.bc(0,"nfj-auth-shell",32),g.rc(1,"translate"),g.bc(2,"div",33),g.Wb(3,"inline-icon",34),g.Wb(4,"inline-icon",35),g.ac(),g.Wb(5,"p",36),g.rc(6,"translate"),g.bc(7,"a",37),g.Zc(8," auth.common.set a new password "),g.ac(),g.ac()),2&t){const t=g.qc().ngIf,e=g.qc();g.yc("showNfjLogo",!1)("title",g.sc(1,4,"auth.errors.email already exist")),g.Hb(5),g.yc("innerHTML",g.tc(6,6,"auth.errors."+t,g.Dc(9,U,e.form.get("login").value)),g.Nc),g.Hb(2),g.yc("queryParams",g.Dc(11,W,e.AuthAction.Reset))}}function Y(t,e){if(1&t){const t=g.cc();g.bc(0,"nfj-auth-shell",38),g.bc(1,"div",39),g.Wb(2,"inline-icon",34),g.ac(),g.Wb(3,"p",40),g.rc(4,"translate"),g.bc(5,"button",41),g.mc("click",function(){return g.Mc(t),g.qc(2).close()}),g.Zc(6," auth.common.close "),g.ac(),g.ac()}if(2&t){const t=g.qc().ngIf,e=g.qc();g.yc("showNfjLogo",!1)("title",e.form.get("login").value),g.Hb(3),g.yc("innerHTML",g.sc(4,3,"auth.errors."+t),g.Nc)}}function G(t,e){if(1&t&&(g.Zb(0),g.Zb(1,29),g.Xc(2,$,9,13,"nfj-auth-shell",30),g.Xc(3,Y,7,5,"nfj-auth-shell",31),g.Yb(),g.Yb()),2&t){const t=e.ngIf,n=g.qc();g.Hb(1),g.yc("ngSwitch",t),g.Hb(1),g.yc("ngSwitchCase",n.LoginErrorType.PASSWORD_NOT_SET)}}var K=function(t){return t.PASSWORD_NOT_SET="PASSWORD_NOT_SET",t.ACCOUNT_NOT_CONFIRMED="ACCOUNT_NOT_CONFIRMED",t.ACCOUNT_BLOCKED="ACCOUNT_BLOCKED",t.default="default",t}({});let B=(()=>{let t=class{constructor(t,e,n,c,i,o){var a,s;this.modalRef=t,this.authenticationService=e,this.router=n,this.fb=c,this.route=i,this.baseHref=o,this.showLinks=!0,this.showSocials=!0,this.LoginErrorType=K,this.emailConfig={cy:"log-in-email",label:"auth.login.email",inputType:v.a.Email,required:!0,hideValidIndicator:!0},this.passwordConfig={cy:"log-in-password",label:"auth.login.password",inputType:v.a.Password,required:!0,hideValidIndicator:!0},this.activationState=new O.a,this.activationState$=this.activationState.select(),this.loginError=new d.a,this.cannotLoginError$=new k.a(null),this.activateToken=(null===(a=this.modalRef.content)||void 0===a?void 0:a.activationToken)||this.route.snapshot.queryParamMap.get("token"),this.userId=(null===(s=this.modalRef.content)||void 0===s?void 0:s.userId)||this.route.snapshot.queryParamMap.get("id"),this.activationAccountMode=this.activateToken&&this.userId,this.AuthAction=b.a}get currentLocationPath(){return(null===window||void 0===window?void 0:window.location.pathname)?"/"+(null===window||void 0===window?void 0:window.location.pathname.replace(this.baseHref,"")):""}ngOnInit(){var t,e,n;this.form=this.fb.group({login:["",[C.z.required,x.a.emailValidator]],passwordDigest:["",C.z.required]}),this.allowRedirect=this.allowRedirectFlag?this.allowRedirectFlag:null===(t=this.modalRef.content)||void 0===t?void 0:t.allowRedirect,this.redirectTo=this.redirectLink?this.redirectLink:null!==(n=null===(e=this.modalRef.content)||void 0===e?void 0:e.redirectTo)&&void 0!==n?n:this.currentLocationPath,this.authenticationService.isLoggedIn$.pipe(Object(o.a)(Boolean),Object(w.b)(this)).subscribe(()=>{setTimeout(()=>{this.allowRedirect&&this.router.navigateByUrl(this.redirectTo)}),this.modalRef.hide()}),this.activationAccountMode&&this.tryActivateAccount()}login(){this.form.valid&&(this.loginError.next(!1),this.activationState.set({error:!1,success:!1,pending:!1}),this.authenticationService.loginByEmail(this.form.value).subscribe(()=>{},t=>{var e;const n=K[null===(e=t.error)||void 0===e?void 0:e.type]||K.default;switch(t.status){case 401:if("Failed to login"===t.error){this.loginError.next("auth.errors.invalid credentials");break}this.cannotLoginError$.next(n);break;default:this.loginError.next("auth.errors.default")}}))}tryActivateAccount(){this.activationState.set({pending:!0}),this.authenticationService.confirmSignUp(this.userId,this.activateToken).subscribe(()=>{this.activationState.set({pending:!1,success:!0,error:!1})},()=>{this.activationState.set({pending:!1,success:!1,error:!0})})}close(){this.modalRef.hide()}};return t.\u0275fac=function(e){return new(e||t)(g.Vb(h.a),g.Vb(f.a),g.Vb(p.i),g.Vb(C.f),g.Vb(p.a),g.Vb(m.a))},t.\u0275cmp=g.Pb({type:t,selectors:[["nfj-auth-login"]],inputs:{showLinks:"showLinks",showSocials:"showSocials",redirectLink:"redirectLink",allowRedirectFlag:"allowRedirectFlag"},decls:5,vars:8,consts:[[3,"title",4,"ngIf"],[4,"ngIf"],[3,"title"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],["formControlName","login",3,"config"],["formControlName","passwordDigest",3,"config"],["class","alert alert-danger mt-3 mb-4 d-flex py-3 align-items-center text-left",4,"ngIf"],["id","log-in-submit","type","submit",1,"btn","btn-primary","d-block","w-100","mt-3","mb-4"],["class","links",4,"ngIf"],[3,"redirectTo"],[1,"divider"],["translate",""],["class","text-center",4,"ngIf"],["class","alert alert-success d-flex py-3 align-items-center text-left","translate","",4,"ngIf"],["class","alert alert-danger d-flex py-3 align-items-center text-left",4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],["translate","",1,"alert","alert-success","d-flex","py-3","align-items-center","text-left"],["matIcon","how_to_reg",1,"mr-3"],[1,"alert","alert-danger","d-flex","py-3","align-items-center","text-left"],["matIcon","vpn_key",1,"mr-3"],["translate","",1,"d-block"],[1,"alert","alert-danger","mt-3","mb-4","d-flex","py-3","align-items-center","text-left"],[1,"links"],["id","log-in-reset-password","translate","",1,"d-block","mb-3","text-primary",3,"routerLink","queryParams"],["id","log-in-sign-up","translate","",1,"d-block","text-primary",3,"routerLink","queryParams"],[3,"ngSwitch"],["class","password-not-set",3,"showNfjLogo","title",4,"ngSwitchCase"],["class","error",3,"showNfjLogo","title",4,"ngSwitchDefault"],[1,"password-not-set",3,"showNfjLogo","title"],[1,"circle-icon","position-relative"],["matIcon","person"],["matIcon","check",1,"position-absolute",2,"bottom","11px","right","9px","--width","25px","--height","25px"],[1,"message",3,"innerHTML"],["translate","",1,"btn","btn-primary","px-5","my-3",3,"routerLink","queryParams"],[1,"error",3,"showNfjLogo","title"],[1,"circle-icon"],[1,"message","text-center",3,"innerHTML"],["translate","",1,"btn","btn-primary","px-5","my-3",3,"click"]],template:function(t,e){1&t&&(g.Xc(0,F,17,19,"nfj-auth-shell",0),g.rc(1,"inverse"),g.rc(2,"async"),g.Xc(3,G,4,2,"ng-container",1),g.rc(4,"async")),2&t&&(g.yc("ngIf",g.sc(1,2,g.sc(2,4,e.cannotLoginError$))),g.Hb(3),g.yc("ngIf",g.sc(4,6,e.cannotLoginError$)))},directives:[m.p,j,C.A,C.s,C.k,M.a,C.r,C.i,_.a,H.a,A.a,S.a,q.a,p.l,m.r,m.s,m.t],pipes:[R.a,m.b,A.d],styles:["[_nghost-%COMP%]{display:block}.message[_ngcontent-%COMP%]{color:#191919;font-size:16px}.password-not-set[_ngcontent-%COMP%]   .circle-icon[_ngcontent-%COMP%]{color:#19a59a}.error[_ngcontent-%COMP%]   .circle-icon[_ngcontent-%COMP%]{color:#f45958}"],changeDetection:0}),t=Object(y.b)([Object(w.a)(),Object(y.c)("design:paramtypes",[h.a,f.a,p.i,C.f,p.a,String])],t),t})();const J=function(t){return{auth:t}};let Q=(()=>{let t=class{constructor(t,e,n){this.authenticationService=t,this.modalRef=e,this.router=n,this.AuthAction=b.a}ngOnInit(){this.authenticationService.isLoggedIn$.pipe(Object(o.a)(Boolean),Object(w.b)(this)).subscribe(()=>{this.router.navigateByUrl("/profile"),this.modalRef.hide()})}};return t.\u0275fac=function(e){return new(e||t)(g.Vb(f.a),g.Vb(h.a),g.Vb(p.i))},t.\u0275cmp=g.Pb({type:t,selectors:[["nfj-auth-signup"]],decls:20,vars:27,consts:[[3,"title"],[1,"text"],[3,"mode"],[1,"divider"],["type","button",1,"btn","btn-primary","d-block","w-100",3,"routerLink","queryParams"],[1,"text","mt-4"],["id","register-modal-login",1,"text-primary",3,"routerLink","queryParams"]],template:function(t,e){1&t&&(g.bc(0,"nfj-auth-shell",0),g.rc(1,"translate"),g.bc(2,"p",1),g.Zc(3),g.rc(4,"translate"),g.ac(),g.Wb(5,"nfj-social-login-box",2),g.bc(6,"div",3),g.bc(7,"span"),g.Zc(8),g.rc(9,"translate"),g.ac(),g.ac(),g.bc(10,"section"),g.bc(11,"button",4),g.Zc(12),g.rc(13,"translate"),g.ac(),g.bc(14,"p",5),g.Zc(15),g.rc(16,"translate"),g.bc(17,"a",6),g.Zc(18),g.rc(19,"translate"),g.ac(),g.ac(),g.ac(),g.ac()),2&t&&(g.yc("title",g.sc(1,11,"auth.common.sign up")),g.Hb(3),g.bd(" ",g.sc(4,13,"auth.signup.subheader")," "),g.Hb(2),g.yc("mode","Sign Up"),g.Hb(3),g.ad(g.sc(9,15,"auth.common.or")),g.Hb(3),g.yc("routerLink",null)("queryParams",g.Dc(23,J,e.AuthAction.SignUpEmail)),g.Hb(1),g.bd(" ",g.sc(13,17,"auth.signup-email.header")," "),g.Hb(3),g.bd(" ",g.sc(16,19,"auth.common.ALREADY_HAVE_AN_ACCOUNT")," "),g.Hb(2),g.yc("routerLink",null)("queryParams",g.Dc(25,J,e.AuthAction.Login)),g.Hb(1),g.bd(" ",g.sc(19,21,"auth.common.login")," "))},directives:[j,H.a,p.j,p.l],pipes:[A.d],styles:[""],changeDetection:0}),t=Object(y.b)([Object(w.a)(),Object(y.c)("design:paramtypes",[f.a,h.a,p.i])],t),t})();var tt=n("KrKk"),et=n("r3xY"),nt=n("3E0/"),ct=n("E+vl"),it=n("LuBc"),ot=n("MK0t"),at=n("M6kj"),st=n("hnqP");const rt=["captcha"];function lt(t,e){if(1&t&&(g.bc(0,"div",27),g.Wb(1,"inline-icon",28),g.bc(2,"div"),g.bc(3,"span",29),g.Zc(4),g.ac(),g.ac(),g.ac()),2&t){const t=e.ngIf;g.Hb(4),g.bd(" ",t," ")}}function dt(t,e){if(1&t&&g.Wb(0,"common-field-errors",30),2&t){const t=g.qc(2);g.yc("showIcon",!1)("errors",t.form.get("termsAccepted").errors)}}function ut(t,e){if(1&t&&g.Wb(0,"common-field-errors",30),2&t){const t=g.qc(3);g.yc("showIcon",!1)("errors",t.form.get("gRecaptchaCode").errors)}}function ht(t,e){if(1&t&&(g.bc(0,"div",31),g.bc(1,"div"),g.Wb(2,"ngx-recaptcha2",32),g.Xc(3,ut,1,2,"common-field-errors",18),g.ac(),g.ac()),2&t){g.qc();const t=g.Jc(3),e=g.qc();g.Hb(2),g.yc("siteKey",e.captchaKeyV2),g.Hb(1),g.yc("ngIf",t.submitted)}}const bt=function(t,e){return{termsLink:t,policyLink:e}},gt=function(t){return{auth:t}};function pt(t,e){if(1&t){const t=g.cc();g.bc(0,"nfj-auth-shell",4),g.rc(1,"translate"),g.bc(2,"form",5,6),g.mc("ngSubmit",function(){return g.Mc(t),g.qc().signUp()}),g.bc(4,"div",7),g.bc(5,"div",8),g.Wb(6,"common-text-field",9),g.ac(),g.bc(7,"div",8),g.Wb(8,"common-text-field",10),g.ac(),g.bc(9,"div",8),g.Wb(10,"common-text-field",11),g.ac(),g.bc(11,"div",8),g.Wb(12,"common-text-field",12),g.ac(),g.ac(),g.Xc(13,lt,5,1,"div",13),g.rc(14,"async"),g.bc(15,"div",14),g.bc(16,"nfj-checkbox",15),g.Wb(17,"span",16),g.rc(18,"translate"),g.bc(19,"span",17),g.Zc(20,"*"),g.ac(),g.ac(),g.Xc(21,dt,1,2,"common-field-errors",18),g.ac(),g.bc(22,"div",14),g.bc(23,"nfj-checkbox",19),g.Zc(24),g.rc(25,"translate"),g.ac(),g.ac(),g.bc(26,"div",20),g.Xc(27,ht,4,2,"div",21),g.bc(28,"button",22),g.Zc(29),g.rc(30,"translate"),g.ac(),g.ac(),g.bc(31,"p",23),g.Zc(32),g.rc(33,"truncate"),g.rc(34,"translate"),g.bc(35,"inline-icon",24),g.mc("click",function(){g.Mc(t);const e=g.qc();return e.consentToggleRecommend=!e.consentToggleRecommend}),g.ac(),g.ac(),g.ac(),g.bc(36,"p",25),g.Zc(37),g.rc(38,"translate"),g.bc(39,"a",26),g.Zc(40),g.rc(41,"translate"),g.ac(),g.ac(),g.ac()}if(2&t){const t=g.Jc(3),e=g.qc();g.yc("title",g.sc(1,18,"auth.signup-email.header")),g.Hb(2),g.yc("formGroup",e.form),g.Hb(4),g.yc("config",e.nameCfg),g.Hb(2),g.yc("config",e.emailCfg),g.Hb(2),g.yc("config",e.passwordCfg),g.Hb(2),g.yc("config",e.passwordConfirmCfg),g.Hb(1),g.yc("ngIf",g.sc(14,20,e.signupError)),g.Hb(4),g.yc("innerHTML",g.tc(18,22,"profile.POLICY_TEXT",g.Ec(38,bt,e.termsLink,e.policyLink)),g.Nc),g.Hb(4),g.yc("ngIf",t.submitted),g.Hb(3),g.bd(" ",g.sc(25,25,"auth.common.marketingAgreement")," "),g.Hb(3),g.yc("ngIf",2===e.captchaVersion.value),g.Hb(2),g.bd(" ",g.sc(30,27,"auth.common.sign up")," "),g.Hb(3),g.bd(" ",g.tc(33,29,g.sc(34,32,"posting-details.FULL_CONSENT"),e.consentToggleRecommend?3e3:280)," "),g.Hb(3),g.yc("matIcon",e.consentToggleRecommend?"keyboard_arrow_up":"keyboard_arrow_down"),g.Hb(2),g.bd(" ",g.sc(38,34,"auth.common.ALREADY_HAVE_AN_ACCOUNT")," "),g.Hb(2),g.yc("routerLink",null)("queryParams",g.Dc(41,gt,e.AuthAction.Login)),g.Hb(1),g.bd(" ",g.sc(41,36,"auth.common.login")," ")}}function ft(t,e){if(1&t){const t=g.cc();g.bc(0,"a",40),g.mc("click",function(){return g.Mc(t),g.qc(2).bsModalRef.hide()}),g.Zc(1),g.rc(2,"translate"),g.ac()}2&t&&(g.Hb(1),g.bd(" ",g.sc(2,1,"auth.common.open gmail")," "))}function mt(t,e){if(1&t){const t=g.cc();g.Zb(0),g.bc(1,"button",41),g.mc("click",function(){return g.Mc(t),g.qc(2).resend()}),g.Zc(2),g.rc(3,"translate"),g.ac(),g.Yb()}2&t&&(g.Hb(2),g.bd(" ",g.sc(3,1,"auth.signup-email.resend")," "))}function yt(t,e){if(1&t){const t=g.cc();g.Zb(0),g.bc(1,"button",42),g.mc("click",function(){return g.Mc(t),g.qc(2).bsModalRef.hide()}),g.Zc(2),g.rc(3,"translate"),g.ac(),g.Yb()}2&t&&(g.Hb(2),g.bd(" ",g.sc(3,1,"auth.signup-email.link has been resend")," "))}function wt(t,e){if(1&t){const t=g.cc();g.bc(0,"nfj-auth-shell",33),g.rc(1,"translate"),g.bc(2,"div",34),g.Wb(3,"inline-icon",35),g.ac(),g.bc(4,"p"),g.Zc(5),g.rc(6,"translate"),g.ac(),g.bc(7,"div",36),g.bc(8,"button",37),g.mc("click",function(){return g.Mc(t),g.qc().bsModalRef.hide()}),g.Zc(9),g.rc(10,"translate"),g.ac(),g.Xc(11,ft,3,3,"a",38),g.ac(),g.Xc(12,mt,4,3,"ng-container",39),g.rc(13,"async"),g.Xc(14,yt,4,3,"ng-container",39),g.rc(15,"async"),g.ac()}if(2&t){const t=g.qc();g.yc("showNfjLogo",!1)("title",g.sc(1,7,"auth.signup-email.account created")),g.Hb(5),g.ad(g.sc(6,9,"auth.signup-email.account created message")),g.Hb(4),g.bd(" ",g.sc(10,11,"auth.common.close")," "),g.Hb(2),g.yc("ngIf",t.isGmail),g.Hb(1),g.yc("ngIf",!1===g.sc(13,13,t.linkResent)),g.Hb(2),g.yc("ngIf",g.sc(15,15,t.linkResent))}}function vt(t,e){if(1&t&&(g.bc(0,"nfj-auth-shell",43),g.bc(1,"div",34),g.Wb(2,"inline-icon",44),g.ac(),g.bc(3,"p",45),g.Zc(4),g.rc(5,"translate"),g.ac(),g.bc(6,"p",46),g.Zc(7),g.ac(),g.bc(8,"a",47),g.Zc(9),g.rc(10,"translate"),g.ac(),g.ac()),2&t){const t=g.qc();g.yc("showNfjLogo",!1),g.Hb(4),g.bd(" ",g.sc(5,6,"auth.signup-email.account exists")," "),g.Hb(3),g.ad(t.form.get("email").value),g.Hb(1),g.yc("routerLink",null)("queryParams",g.Dc(10,gt,t.AuthAction.Login)),g.Hb(1),g.bd(" ",g.sc(10,8,"auth.common.login")," ")}}function Ct(t,e){if(1&t&&(g.Zb(0,48),g.Wb(1,"ngx-recaptcha2",32,3),g.Yb()),2&t){const t=g.qc();g.yc("formGroup",t.form),g.Hb(1),g.yc("siteKey",t.captchaKeyV2)}}var xt=function(t){return t[t.Init=0]="Init",t[t.AccountCreated=1]="AccountCreated",t[t.AccountExists=2]="AccountExists",t}({});let kt=(()=>{let t=class{constructor(t,e,n,c,i,o,a,s,r){this.fb=t,this.translate=e,this.authSv=n,this.validationService=c,this.modal=i,this.bsModalRef=o,this.messagesService=a,this.translateService=s,this.recaptchaValidation=r,this.Mode=xt,this.mode=new k.a(xt.Init),this.nameCfg={label:"auth.signup-email.form.name & surname",required:!0,hideValidIndicator:!0},this.emailCfg={label:"auth.signup-email.form.email",inputType:v.a.Email,required:!0,hideValidIndicator:!0},this.passwordCfg={label:"auth.signup-email.form.password",inputType:v.a.Password,required:!0,hideValidIndicator:!0},this.passwordConfirmCfg={label:"auth.signup-email.form.password confirm",inputType:v.a.Password,required:!0,hideValidIndicator:!0},this.termsLink="/static/No_Fluff_Jobs_Terms_and_Conditions.pdf?nocache",this.policyLink="/static/No_Fluff_Jobs_Privacy_Policy.pdf?nocache",this.AuthAction=b.a,this.captchaKeyV3=this.recaptchaValidation.captchaKeyV3,this.captchaKeyV2=this.recaptchaValidation.captchaKeyV2,this.signupError=new k.a(!1),this.linkResent=new k.a(!1),this.isGmail=!1}ngOnInit(){this.form=this.fb.group({name:["",C.z.required],email:["",[C.z.required,C.z.email]],passwordDigest:["",[C.z.required,x.a.passwordValidator(et.a)]],passwordDigestRepeat:["",[C.z.required]],termsAccepted:[!1,C.z.requiredTrue],gRecaptchaCode:[""],gRecaptchaVersion:[3],marketingAgreement:[!1]},{validators:t=>x.a.passwordsMatchValidator(t.get("passwordDigest"),t.get("passwordDigestRepeat"))})}get captchaVersion(){return this.form.get("gRecaptchaVersion")}get captchaCode(){return this.form.get("gRecaptchaCode")}signUp(t=!1){this.form.valid&&this.recaptchaValidation.prepareCaptchaCode({action:"signup",captchaCodeValue:this.captchaCode.value,captchaVersionValue:this.captchaVersion.value},e=>this.submitRequest(t,e))}submitRequest(t,e){this.isGmail=this.form.value.email.includes("@gmail"),this.signupError.next(!1),this.authSv.signUpByEmail(Object.assign(Object.assign({},this.form.value),{gRecaptchaCode:e})).subscribe(()=>{this.mode.next(xt.AccountCreated),t&&this.linkResent.next(!0)},t=>{var e,n;const c=((null===(e=t.error)||void 0===e?void 0:e.violations)||[]).find(t=>"recaptchaCode"===t.field);c&&this.recaptchaValidation.handleIsBotResponse(c.msg,this.captchaVersion)||("string"==typeof t.error&&t.error.includes("exists")?this.mode.next(xt.AccountExists):this.signupError.next("auth.errors.default"),null===(n=this.captchaCmp)||void 0===n||n.reloadCaptcha(),this.form.get("gRecaptchaCode").patchValue(""))})}resend(){const t=this.modal.show(this.captchaTmpl,{backdrop:"static",ignoreBackdropClick:!0,class:"captcha-modal",animated:!0});this.form.get("gRecaptchaCode").valueChanges.pipe(Object(r.a)(1),Object(nt.a)(100),Object(w.b)(this)).subscribe(()=>{t.hide(),this.signUp(!0)})}};return t.\u0275fac=function(e){return new(e||t)(g.Vb(C.f),g.Vb(A.e),g.Vb(f.a),g.Vb(x.a),g.Vb(h.b),g.Vb(h.a),g.Vb(it.a),g.Vb(A.e),g.Vb(tt.a))},t.\u0275cmp=g.Pb({type:t,selectors:[["nfj-auth-signup-email"]],viewQuery:function(t,e){if(1&t&&(g.fd(rt,1),g.fd(ct.b,1)),2&t){let t;g.Ic(t=g.nc())&&(e.captchaTmpl=t.first),g.Ic(t=g.nc())&&(e.captchaCmp=t.first)}},decls:8,vars:9,consts:[[3,"title",4,"ngIf"],[3,"showNfjLogo","title",4,"ngIf"],["title","","class","account-exists",3,"showNfjLogo",4,"ngIf"],["captcha",""],[3,"title"],[3,"formGroup","ngSubmit"],["formDirective","ngForm"],[1,"row","text-left"],[1,"col-sm-6"],["formControlName","name",3,"config"],["formControlName","email",3,"config"],["formControlName","passwordDigest",3,"config"],["formControlName","passwordDigestRepeat",3,"config"],["class","alert alert-danger mt-3 mb-4 d-flex py-3 align-items-center text-left",4,"ngIf"],[1,"my-3"],["gtmId","sign-up-termsAccepted","formControlName","termsAccepted"],[3,"innerHTML"],[1,"star"],[3,"showIcon","errors",4,"ngIf"],["gtmId","sign-up-marketingAgreement","formControlName","marketingAgreement"],[1,"d-flex","my-4","flex-wrap"],["class","d-flex justify-content-center mr-3",4,"ngIf"],["id","sign-up-submit","type","submit",1,"btn","btn-primary","mt-3","flex-grow-1","d-block",2,"min-width","40%"],[1,"text-gray","text-left"],["role","button",2,"vertical-align","middle","cursor","pointer",3,"matIcon","click"],[1,"border-top","mt-4","pt-3","text-center","mb-0","font-size-14"],[1,"text-primary",3,"routerLink","queryParams"],[1,"alert","alert-danger","mt-3","mb-4","d-flex","py-3","align-items-center","text-left"],["matIcon","vpn_key",1,"mr-3"],["translate","",1,"d-block"],[3,"showIcon","errors"],[1,"d-flex","justify-content-center","mr-3"],["required","","formControlName","gRecaptchaCode",3,"siteKey"],[3,"showNfjLogo","title"],[1,"circle-icon"],["matIcon","check"],[1,"text-center","mt-4"],["type","button",1,"btn","btn-primary",3,"click"],["href","https://mail.google.com","target","_blank","class","btn btn-link","type","button",3,"click",4,"ngIf"],[4,"ngIf"],["href","https://mail.google.com","target","_blank","type","button",1,"btn","btn-link",3,"click"],["type","button","loadingIndicator","",1,"btn","btn-link","my-4",3,"click"],["type","button",1,"btn","btn-link","my-4",3,"click"],["title","",1,"account-exists",3,"showNfjLogo"],["matIcon","local_post_office"],[1,"font-size-16"],[1,"email"],["type","button",1,"btn","btn-primary","my-3",3,"routerLink","queryParams"],[3,"formGroup"]],template:function(t,e){1&t&&(g.Xc(0,pt,42,43,"nfj-auth-shell",0),g.rc(1,"async"),g.Xc(2,wt,16,17,"nfj-auth-shell",1),g.rc(3,"async"),g.Xc(4,vt,11,12,"nfj-auth-shell",2),g.rc(5,"async"),g.Xc(6,Ct,3,2,"ng-template",null,3,g.Yc)),2&t&&(g.yc("ngIf",g.sc(1,3,e.mode)===e.Mode.Init),g.Hb(2),g.yc("ngIf",g.sc(3,5,e.mode)===e.Mode.AccountCreated),g.Hb(2),g.yc("ngIf",g.sc(5,7,e.mode)===e.Mode.AccountExists))},directives:[m.p,j,C.A,C.s,C.k,M.a,C.r,C.i,ot.a,_.a,S.a,q.a,p.l,A.a,at.a,ct.b,C.y],pipes:[m.b,A.d,st.a],styles:["p[_ngcontent-%COMP%]{color:#888;font-size:13px}.circle-icon[_ngcontent-%COMP%]{color:#19a59a}.account-exists[_ngcontent-%COMP%]   .circle-icon[_ngcontent-%COMP%]{color:#f45958}.account-exists[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#111;font-size:16px}.account-exists[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:#111;font-size:22px;font-weight:700}  .captcha-modal{margin-top:-40px;max-width:none;top:50vh;width:380px}  .captcha-modal .modal-content{border-color:red;flex-direction:row;justify-content:center;padding:40px}"],changeDetection:0}),t=Object(y.b)([Object(w.a)(),Object(y.c)("design:paramtypes",[C.f,A.e,f.a,x.a,h.b,h.a,it.a,A.e,tt.a])],t),t})();const Ot=function(t){return{auth:t}};function Pt(t,e){if(1&t){const t=g.cc();g.bc(0,"nfj-auth-shell",3),g.rc(1,"translate"),g.bc(2,"div",4),g.Wb(3,"inline-icon",5),g.ac(),g.bc(4,"form",6),g.mc("ngSubmit",function(){return g.Mc(t),g.qc().sendResetPasswordEmail()}),g.bc(5,"p",7),g.Zc(6,"auth.reset-password.init message"),g.ac(),g.Wb(7,"common-text-field",8),g.bc(8,"button",9),g.Zc(9," auth.reset-password.send button "),g.ac(),g.ac(),g.bc(10,"p",10),g.bc(11,"a",11),g.Zc(12),g.rc(13,"translate"),g.rc(14,"lowercase"),g.rc(15,"translate"),g.ac(),g.ac(),g.ac()}if(2&t){const t=g.qc();g.yc("showNfjLogo",!1)("title",g.sc(1,8,"auth.common.reset password")),g.Hb(4),g.yc("formGroup",t.resetPasswordForm),g.Hb(3),g.yc("config",t.emailConfig),g.Hb(4),g.yc("routerLink",null)("queryParams",g.Dc(16,Ot,t.AuthAction.Login)),g.Hb(1),g.cd(" ",g.sc(13,10,"auth.reset-password.back to")," ",g.sc(14,12,g.sc(15,14,"auth.reset-password.login"))," ")}}function It(t,e){if(1&t&&(g.bc(0,"nfj-auth-shell",12),g.bc(1,"div",4),g.Wb(2,"inline-icon",13),g.ac(),g.bc(3,"p",7),g.Zc(4,"auth.reset-password.error message"),g.ac(),g.bc(5,"a",14),g.Zc(6," auth.common.sign up "),g.ac(),g.ac()),2&t){const t=g.qc();g.yc("showNfjLogo",!1)("title",t.resetPasswordForm.value.email),g.Hb(5),g.yc("routerLink",null)("queryParams",g.Dc(4,Ot,t.AuthAction.SignUp))}}const Lt=function(t){return{email:t}};function jt(t,e){if(1&t){const t=g.cc();g.bc(0,"nfj-auth-shell",15),g.rc(1,"translate"),g.bc(2,"div",4),g.Wb(3,"inline-icon",16),g.ac(),g.bc(4,"div",17),g.bc(5,"p",18),g.Zc(6),g.rc(7,"translate"),g.ac(),g.bc(8,"button",19),g.mc("click",function(){return g.Mc(t),g.qc().close()}),g.Zc(9," auth.reset-password.done "),g.ac(),g.ac(),g.ac()}if(2&t){const t=g.qc();g.yc("showNfjLogo",!1)("title",g.sc(1,3,"auth.reset-password.password reset email sent")),g.Hb(6),g.bd(" ",g.tc(7,5,"auth.reset-password.success message",g.Dc(8,Lt,t.resetPasswordForm.value.email))," ")}}var Mt=function(t){return t[t.OK=0]="OK",t[t.ERROR=1]="ERROR",t[t.INIT=2]="INIT",t}({});let _t=(()=>{class t{constructor(t,e,n){this.fb=t,this.bsModalRef=e,this.auth=n,this.status=new k.a(Mt.INIT),this.resetStatus=Mt,this.AuthAction=b.a,this.emailConfig={label:"",placeholder:"john@doe.com",autocapitalize:"off",required:!0,cy:"reset-password-email",inputType:v.a.Email}}ngOnInit(){this.resetPasswordForm=this.fb.group({email:["",[C.z.required,C.z.email]]})}sendResetPasswordEmail(){this.resetPasswordForm.valid&&this.auth.resetPasswordRequest(this.resetPasswordForm.value.email).subscribe(()=>{this.status.next(Mt.OK)},()=>{this.status.next(Mt.ERROR)})}close(){this.bsModalRef.hide()}}return t.\u0275fac=function(e){return new(e||t)(g.Vb(C.f),g.Vb(h.a),g.Vb(f.a))},t.\u0275cmp=g.Pb({type:t,selectors:[["nfj-auth-reset-password"]],decls:6,vars:9,consts:[["class","reset-password reset-password--init",3,"showNfjLogo","title",4,"ngIf"],["class","reset-password reset-password--error",3,"showNfjLogo","title",4,"ngIf"],["class","reset-password reset-password--ok",3,"showNfjLogo","title",4,"ngIf"],[1,"reset-password","reset-password--init",3,"showNfjLogo","title"],[1,"circle-icon"],["matIcon","vpn_key"],[1,"mb-4",3,"formGroup","ngSubmit"],["translate","",1,"message"],["formControlName","email",1,"d-block","my-5",3,"config"],["id","reset-password-send","type","submit","translate","",1,"btn","btn-primary","px-5"],[1,"mt-4","pt-3","font-gray-400","text-center","mb-0","font-size-14"],["id","reset-password-back-login",1,"text-primary",3,"routerLink","queryParams"],[1,"reset-password","reset-password--error",3,"showNfjLogo","title"],["matIcon","person"],["id","reset-password-error-sign-up","translate","",1,"btn","btn-primary","px-5","my-3",3,"routerLink","queryParams"],[1,"reset-password","reset-password--ok",3,"showNfjLogo","title"],["matIcon","check"],[1,"mb-4"],[1,"message"],["id","reset-password-done","type","button","translate","",1,"btn","btn-primary","px-5","my-3",3,"click"]],template:function(t,e){1&t&&(g.Xc(0,Pt,16,18,"nfj-auth-shell",0),g.rc(1,"async"),g.Xc(2,It,7,6,"nfj-auth-shell",1),g.rc(3,"async"),g.Xc(4,jt,10,10,"nfj-auth-shell",2),g.rc(5,"async")),2&t&&(g.yc("ngIf",g.sc(1,3,e.status)===e.resetStatus.INIT),g.Hb(2),g.yc("ngIf",g.sc(3,5,e.status)===e.resetStatus.ERROR),g.Hb(2),g.yc("ngIf",g.sc(5,7,e.status)===e.resetStatus.OK))},directives:[m.p,j,S.a,q.a,C.A,C.s,C.k,A.a,M.a,C.r,C.i,_.a,p.l],pipes:[m.b,A.d,m.m],styles:[".message[_ngcontent-%COMP%]{color:#191919;font-size:16px}.reset-password--init[_ngcontent-%COMP%]   .circle-icon[_ngcontent-%COMP%]{color:#bababa}.reset-password--error[_ngcontent-%COMP%]   .circle-icon[_ngcontent-%COMP%]{color:#f45958}.reset-password--ok[_ngcontent-%COMP%]   .circle-icon[_ngcontent-%COMP%]{color:#19a59a}"],changeDetection:0}),t})();const Ht=function(t){return{auth:t}};function At(t,e){if(1&t&&(g.Zb(0),g.bc(1,"div",3),g.Wb(2,"inline-icon",4),g.bc(3,"div"),g.bc(4,"span",5),g.Zc(5,"auth.set-password.token expired"),g.ac(),g.bc(6,"span",6),g.Zc(7,"auth.set-password.message"),g.ac(),g.ac(),g.ac(),g.bc(8,"section"),g.bc(9,"a",7),g.Zc(10),g.rc(11,"translate"),g.ac(),g.ac(),g.Yb()),2&t){const t=g.qc(3);g.Hb(9),g.yc("routerLink",null)("replaceUrl",!0)("queryParams",g.Dc(6,Ht,t.AuthAction.Reset)),g.Hb(1),g.bd(" ",g.sc(11,4,"auth.common.reset password")," ")}}function St(t,e){if(1&t){const t=g.cc();g.bc(0,"section"),g.bc(1,"form",8),g.mc("ngSubmit",function(){return g.Mc(t),g.qc(3).setPassword()}),g.Wb(2,"common-text-field",9),g.Wb(3,"common-text-field",10),g.bc(4,"button",11),g.Zc(5),g.rc(6,"translate"),g.ac(),g.ac(),g.ac()}if(2&t){const t=g.qc(3);g.Hb(1),g.yc("formGroup",t.form),g.Hb(1),g.yc("config",t.passwordCfg),g.Hb(1),g.yc("config",t.passwordConfirmCfg),g.Hb(2),g.bd(" ",g.sc(6,4,"auth.set-password.set password")," ")}}function qt(t,e){if(1&t&&(g.bc(0,"nfj-auth-shell",2),g.rc(1,"translate"),g.Xc(2,At,12,8,"ng-container",0),g.Xc(3,St,7,6,"section",0),g.ac()),2&t){const t=g.qc().ngIf;g.yc("title",g.sc(1,3,"auth.common.set a new password")),g.Hb(2),g.yc("ngIf",t.error),g.Hb(1),g.yc("ngIf",!t.error)}}function Rt(t,e){if(1&t&&(g.bc(0,"section"),g.bc(1,"a",15),g.Zc(2),g.rc(3,"translate"),g.ac(),g.ac()),2&t){const t=g.qc(3);g.Hb(1),g.yc("routerLink",null)("queryParams",g.Dc(5,Ht,t.AuthAction.Login)),g.Hb(1),g.bd(" ",g.sc(3,3,"auth.common.login")," ")}}function Nt(t,e){if(1&t&&(g.Zb(0),g.bc(1,"nfj-auth-shell",12),g.rc(2,"translate"),g.bc(3,"div",13),g.Wb(4,"inline-icon",14),g.ac(),g.Xc(5,Rt,4,7,"section",0),g.ac(),g.Yb()),2&t){const t=g.qc(2);g.Hb(1),g.yc("showNfjLogo",!1)("title",g.sc(2,3,t.auth.isCandidateLoggedIn()?"auth.set-password.PASSWORD_CHANGED":"auth.set-password.PASSWORD_CHANGED_LOGIN")),g.Hb(4),g.yc("ngIf",!t.auth.isCandidateLoggedIn())}}function Tt(t,e){if(1&t&&(g.Zb(0),g.Xc(1,qt,4,5,"nfj-auth-shell",1),g.Xc(2,Nt,6,5,"ng-container",0),g.Yb()),2&t){const t=e.ngIf;g.Hb(1),g.yc("ngIf",!t.success),g.Hb(1),g.yc("ngIf",t.success)}}let Vt=(()=>{class t{constructor(t,e,n){this.fb=t,this.auth=e,this.route=n,this.setPasswordState=new O.a,this.setPasswordState$=this.setPasswordState.select(),this.AuthAction=b.a,this.passwordCfg={label:"auth.signup-email.form.password",inputType:v.a.Password,required:!0},this.passwordConfirmCfg={label:"auth.signup-email.form.password confirm",inputType:v.a.Password,required:!0}}ngOnInit(){this.setPasswordState.set({error:!1,success:!1}),this.form=this.fb.group({passwordDigest:["",[C.z.required,x.a.passwordValidator(et.a)]],passwordDigestRepeat:["",C.z.required]},{validators:t=>x.a.passwordsMatchValidator(t.get("passwordDigest"),t.get("passwordDigestRepeat"))})}setPassword(){if(this.form.valid){const{id:t,token:e}=this.route.snapshot.queryParams;this.auth.confirmResetPassword({accountId:t,resetToken:e,newPasswordDigest:this.form.value.passwordDigest,newPasswordDigestRepeat:this.form.value.passwordDigestRepeat}).subscribe(()=>{this.auth.isCandidateLoggedIn()&&this.auth.updateCandidate({hasPassword:!0}),this.setPasswordState.set({error:!1,success:!0})},()=>{this.setPasswordState.set({error:!0,success:!1})})}}}return t.\u0275fac=function(e){return new(e||t)(g.Vb(C.f),g.Vb(f.a),g.Vb(p.a))},t.\u0275cmp=g.Pb({type:t,selectors:[["nfj-auth-set-password"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"title",4,"ngIf"],[3,"title"],[1,"alert","alert-danger","d-flex","py-3","align-items-center","text-left"],["matIcon","vpn_key",1,"mr-3"],["translate",""],["translate","",1,"d-block"],[1,"btn","btn-primary",3,"routerLink","replaceUrl","queryParams"],[3,"formGroup","ngSubmit"],["formControlName","passwordDigest",3,"config"],["formControlName","passwordDigestRepeat",3,"config"],["type","submit",1,"btn","btn-primary","d-block","w-100","mt-3","mb-4"],[3,"showNfjLogo","title"],[1,"circle-icon"],["matIcon","check"],[1,"btn","btn-primary",3,"routerLink","queryParams"]],template:function(t,e){1&t&&(g.Xc(0,Tt,3,2,"ng-container",0),g.rc(1,"async")),2&t&&g.yc("ngIf",g.sc(1,1,e.setPasswordState$))},directives:[m.p,j,S.a,q.a,A.a,p.l,C.A,C.s,C.k,M.a,C.r,C.i,_.a],pipes:[m.b,A.d],styles:[".circle-icon[_ngcontent-%COMP%]{color:#19a59a}"],changeDetection:0}),t})();function Et(t,e){if(1&t&&(g.Wb(0,"nfj-auth-login",7),g.rc(1,"async")),2&t){const t=g.qc(2);g.yc("redirectLink",g.sc(1,2,t.redirectQueryUrl$))("allowRedirectFlag",!0)}}function Zt(t,e){1&t&&g.Wb(0,"nfj-auth-login",8),2&t&&g.yc("allowRedirectFlag",!0)}function Dt(t,e){1&t&&g.Wb(0,"nfj-auth-signup")}function Xt(t,e){1&t&&g.Wb(0,"nfj-auth-signup-email")}function Wt(t,e){1&t&&g.Wb(0,"nfj-auth-reset-password")}function zt(t,e){1&t&&g.Wb(0,"nfj-auth-set-password")}function Ft(t,e){if(1&t){const t=g.cc();g.bc(0,"nfj-auth-shell",10),g.rc(1,"translate"),g.bc(2,"button",11),g.mc("click",function(){return g.Mc(t),g.qc(3).close()}),g.Zc(3," auth.common.close "),g.ac(),g.ac()}2&t&&g.yc("title",g.sc(1,1,"auth.common.account dropped"))}function Ut(t,e){if(1&t&&(g.bc(0,"div"),g.Xc(1,Ft,4,3,"nfj-auth-shell",9),g.rc(2,"async"),g.ac()),2&t){const t=g.qc(2);g.Hb(1),g.yc("ngIf",g.sc(2,1,t.dropAccount$))}}const $t=function(){return{show:!0,backdrop:!0,ignoreBackdropClick:!1,focus:!0}};function Yt(t,e){if(1&t){const t=g.cc();g.bc(0,"div",1),g.mc("onHidden",function(){return g.Mc(t),g.qc().onHiddenHandler()}),g.bc(1,"div",2),g.Zb(2,3),g.rc(3,"async"),g.Xc(4,Et,2,4,"nfj-auth-login",4),g.Xc(5,Zt,1,1,"nfj-auth-login",5),g.Xc(6,Dt,1,0,"nfj-auth-signup",6),g.Xc(7,Xt,1,0,"nfj-auth-signup-email",6),g.Xc(8,Wt,1,0,"nfj-auth-reset-password",6),g.Xc(9,zt,1,0,"nfj-auth-set-password",6),g.Xc(10,Ut,3,3,"div",6),g.Yb(),g.ac(),g.ac()}if(2&t){const t=g.qc();g.yc("config",g.Cc(11,$t)),g.Hb(2),g.yc("ngSwitch",g.sc(3,9,t.type$)),g.Hb(2),g.yc("ngSwitchCase",t.AuthAction.Login),g.Hb(1),g.yc("ngSwitchCase",t.AuthAction.Activate),g.Hb(1),g.yc("ngSwitchCase",t.AuthAction.SignUp),g.Hb(1),g.yc("ngSwitchCase",t.AuthAction.SignUpEmail),g.Hb(1),g.yc("ngSwitchCase",t.AuthAction.Reset),g.Hb(1),g.yc("ngSwitchCase",t.AuthAction.SetPassword),g.Hb(1),g.yc("ngSwitchCase",t.AuthAction.DropAccount)}}let Gt=(()=>{class t{constructor(t,e,n){this.route=t,this.router=e,this.auth=n,this.AuthAction=b.a,this.closeSubject=new d.a,this.redirectQueryUrl$=this.route.queryParams.pipe(Object(c.a)(t=>t.redirectUrl||"")),this.guards={[b.a.Login]:()=>Object(u.a)(this.isNotLoggedIn()),[b.a.Reset]:()=>Object(u.a)(!0),[b.a.SignUp]:()=>Object(u.a)(this.isNotLoggedIn()),[b.a.SignUpEmail]:()=>Object(u.a)(this.isNotLoggedIn()),[b.a.Activate]:()=>{const{token:t,id:e}=this.route.snapshot.queryParams,n=t&&e&&this.isNotLoggedIn();return Object(u.a)(n)},[b.a.SetPassword]:()=>{const{token:t,id:e}=this.route.snapshot.queryParams,n=t&&e;return Object(u.a)(n)},[b.a.DropAccount]:()=>{const{token:t,id:e}=this.route.snapshot.queryParams,n=t&&e&&this.isNotLoggedIn();return Object(u.a)(n)}},this.dropAccount$=(()=>{const{token:t,id:e}=this.route.snapshot.queryParams;return this.auth.dropAccount(t,e).pipe(Object(i.a)(!0))})(),this.type$=this.route.queryParamMap.pipe(Object(c.a)(t=>t.get("auth")),Object(o.a)(t=>Object.values(b.a).includes(t))),this.show$=this.type$.pipe(Object(a.a)(t=>this.guards[t]().pipe(Object(a.a)(t=>t?this.closeSubject.pipe(Object(r.a)(1),Object(i.a)(!1),Object(l.a)(!0)):this.redirectQueryUrl$.pipe(Object(s.a)(t=>{t?this.router.navigateByUrl(t):this.removeParam()}),Object(i.a)(!1))),Object(l.a)(!1))))}removeParam(){this.router.navigate([],{queryParams:{auth:null,token:null,id:null},queryParamsHandling:"merge"})}close(){setTimeout(()=>this.bsModal.hide())}onHiddenHandler(){this.removeParam(),this.closeSubject.next()}hide(){this.onHiddenHandler()}setClass(){}isNotLoggedIn(){return!this.auth.isLoggedIn()}}return t.\u0275fac=function(e){return new(e||t)(g.Vb(p.a),g.Vb(p.i),g.Vb(f.a))},t.\u0275cmp=g.Pb({type:t,selectors:[["nfj-auth-handler"]],viewQuery:function(t,e){if(1&t&&g.fd(h.c,1),2&t){let t;g.Ic(t=g.nc())&&(e.bsModal=t.first)}},features:[g.Gb([{provide:h.a,useExisting:t}])],decls:2,vars:3,consts:[["class","modal fade","bsModal","",3,"config","onHidden",4,"ngIf"],["bsModal","",1,"modal","fade",3,"config","onHidden"],[1,"auth-modal","modal-dialog","modal-auth","modal-lg"],[3,"ngSwitch"],[3,"redirectLink","allowRedirectFlag",4,"ngSwitchCase"],["redirectLink","profile/account",3,"allowRedirectFlag",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"redirectLink","allowRedirectFlag"],["redirectLink","profile/account",3,"allowRedirectFlag"],[3,"title",4,"ngIf"],[3,"title"],["translate","",1,"btn","btn-primary","px-5","my-3",3,"click"]],template:function(t,e){1&t&&(g.Xc(0,Yt,11,12,"div",0),g.rc(1,"async")),2&t&&g.yc("ngIf",g.sc(1,1,e.show$))},directives:[m.p,h.c,m.r,m.s,B,Q,kt,_t,Vt,j,A.a],pipes:[m.b,A.d],styles:[".auth-modal[_ngcontent-%COMP%]{background:#fff;margin-left:auto;margin-right:auto;margin-top:80px;max-width:700px;padding-bottom:30px;padding-left:40px;padding-right:40px;pointer-events:auto;text-align:center}.auth-modal[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:0 auto;position:relative;top:-40px;width:80px}.auth-modal[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;width:80px}.auth-modal[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#111;font-size:28px;font-weight:700;margin-bottom:20px;margin-top:50px}.auth-modal[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#888;font-size:14px;font-weight:400}"],changeDetection:0}),t})();var Kt=n("cyBE"),Bt=n("crxN")},qZRz:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var c=n("mrSG"),i=n("8Y7J"),o=n("vbON"),a=n("pLZG"),s=n("zP0r"),r=n("/uUt"),l=n("GJmQ"),d=n("eIep"),u=n("vkgz"),h=n("3bzS"),b=n("xgIS"),g=n("PqYM");let p=(()=>{let t=class{constructor(t,e,n){this.element=t,this.loadingService=e,this.renderer=n,this.loadingIndicatorEnabled=!0,this.loadingListenFor="all",this.loadingClass="btn-loading",this.loading=new i.o,this.isLoading=!1,this.click=Object(b.a)(this.element.nativeElement,"click").pipe(Object(a.a)(()=>this.loadingIndicatorEnabled&&!this.isLoading)),this.waitForReqTime$=Object(g.a)(500)}ngOnInit(){const t=this.loadingService.getLoadingState$("all"!==this.loadingListenFor?this.loadingListenFor:null).pipe(Object(s.a)(1),Object(r.a)(),Object(l.a)(t=>!!t,!0));this.click.pipe(Object(d.a)(()=>t),Object(u.a)(t=>{t?this.startLoading():this.stopLoading()}),Object(h.b)(this)).subscribe()}stopLoading(){this.loading.emit(!1),this.isLoading=!1,this.renderer.removeClass(this.element.nativeElement,this.loadingClass),this.renderer.removeAttribute(this.element.nativeElement,"disabled")}startLoading(){this.loading.emit(!0),this.isLoading=!0,this.renderer.addClass(this.element.nativeElement,this.loadingClass),this.renderer.setAttribute(this.element.nativeElement,"disabled","")}};return t.\u0275fac=function(e){return new(e||t)(i.Vb(i.m),i.Vb(o.a),i.Vb(i.I))},t.\u0275dir=i.Qb({type:t,selectors:[["button","type","submit"],["button","loadingIndicator",""]],inputs:{loadingIndicatorEnabled:"loadingIndicatorEnabled",loadingListenFor:"loadingListenFor",loadingClass:"loadingClass"},outputs:{loading:"loading"}}),t=Object(c.b)([Object(h.a)(),Object(c.c)("design:paramtypes",[i.m,o.a,i.I])],t),t})()},r3xY:function(t,e,n){"use strict";n.d(e,"a",function(){return c});const c=8}}]);